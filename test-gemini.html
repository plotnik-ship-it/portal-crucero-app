<!DOCTYPE html>
<html>

<head>
    <title>Test Gemini API</title>
</head>

<body>
    <h1>Gemini API Test</h1>
    <button onclick="listModels()">List Available Models</button>
    <button onclick="testGenerate()">Test Generate Content</button>
    <pre id="output"></pre>

    <script type="module">
        import { GoogleGenerativeAI } from 'https://esm.run/@google/generative-ai';

        const API_KEY = 'AIzaSyCXCxcDuncoBcRKb45KsKJdBIx2OUxYjUI';
        const genAI = new GoogleGenerativeAI(API_KEY);

        window.listModels = async function () {
            const output = document.getElementById('output');
            output.textContent = 'Fetching available models...\n';

            try {
                // Try to list models
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`);
                const data = await response.json();

                output.textContent = 'Available Models:\n' + JSON.stringify(data, null, 2);
            } catch (error) {
                output.textContent = 'Error: ' + error.message + '\n' + JSON.stringify(error, null, 2);
            }
        };

        window.testGenerate = async function () {
            const output = document.getElementById('output');
            output.textContent = 'Testing content generation...\n';

            const modelsToTry = [
                'gemini-pro',
                'gemini-1.5-pro',
                'gemini-1.5-flash',
                'gemini-1.5-flash-latest',
                'models/gemini-pro',
                'models/gemini-1.5-pro',
                'models/gemini-1.5-flash'
            ];

            for (const modelName of modelsToTry) {
                try {
                    output.textContent += `\nTrying model: ${modelName}...\n`;
                    const model = genAI.getGenerativeModel({ model: modelName });
                    const result = await model.generateContent('Hello');
                    const response = await result.response;
                    const text = response.text();
                    output.textContent += `✅ SUCCESS with ${modelName}: ${text.substring(0, 50)}...\n`;
                    break; // Stop on first success
                } catch (error) {
                    output.textContent += `❌ FAILED with ${modelName}: ${error.message}\n`;
                }
            }
        };
    </script>
</body>

</html>