/* ===================================
   RESPONSIVE DESIGN
   =================================== */

/* Tablet Breakpoint (768px - 1024px) */
@media (max-width: 1024px) {

    /* Grid Adjustments */
    .grid-cols-4 {
        grid-template-columns: repeat(2, 1fr);
    }

    .grid-cols-3 {
        grid-template-columns: repeat(2, 1fr);
    }

    /* Container Padding */
    .container {
        padding: 0 var(--spacing-md);
    }

    /* Page Spacing */
    .page {
        padding: var(--spacing-lg) 0;
    }

    /* Card Spacing */
    .card {
        padding: var(--spacing-lg);
    }

    /* Font Sizes */
    .page-title {
        font-size: 2rem;
    }

    h1 {
        font-size: var(--font-size-2xl);
    }

    h2 {
        font-size: var(--font-size-xl);
    }
}

/* Mobile Breakpoint (\u003c 768px) */
@media (max-width: 768px) {

    /* Grid to Single Column */
    .grid-cols-4,
    .grid-cols-3,
    .grid-cols-2 {
        grid-template-columns: 1fr;
    }

    /* Container */
    .container {
        padding: 0 var(--spacing-sm);
    }

    /* Page */
    .page {
        padding: var(--spacing-md) 0;
    }

    .page-header {
        margin-bottom: var(--spacing-lg);
    }

    .page-title {
        font-size: 1.75rem;
    }

    .page-subtitle {
        font-size: var(--font-size-base);
    }

    /* Cards */
    .card {
        padding: var(--spacing-md);
        border-radius: var(--radius-lg);
    }

    .card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-sm);
    }

    /* Buttons */
    .btn {
        min-height: 44px;
        min-width: 44px;
        padding: 0.75rem 1rem;
        font-size: var(--font-size-sm);
    }

    .btn-block-mobile {
        width: 100%;
    }

    /* Forms */
    .form-group {
        margin-bottom: var(--spacing-md);
    }

    .form-input,
    .form-select,
    .form-textarea {
        font-size: 16px;
        /* Prevents zoom on iOS */
    }

    .form-input:focus {
        scroll-margin-bottom: 100px;
        /* Space for keyboard */
    }

    /* Tables - Horizontal Scroll */
    .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin: 0 calc(var(--spacing-sm) * -1);
        padding: 0 var(--spacing-sm);
    }

    .table {
        min-width: 600px;
    }

    .table th,
    .table td {
        padding: var(--spacing-sm);
        font-size: var(--font-size-xs);
    }

    /* Modal Full Screen */
    .modal-overlay {
        padding: 0;
    }

    .modal-content {
        width: 100vw;
        height: 100vh;
        max-width: none;
        max-height: none;
        border-radius: 0;
        margin: 0;
    }

    .modal-header,
    .modal-body,
    .modal-footer {
        padding: var(--spacing-md);
    }

    /* Tabs Vertical Stack */
    .tabs {
        flex-direction: column;
        gap: var(--spacing-xs);
    }

    .tab-button {
        width: 100%;
        border-radius: var(--radius-md) !important;
        justify-content: flex-start;
    }

    /* Mobile/Desktop visibility toggles */
    .mobile-only {
        display: block;
    }

    .desktop-only {
        display: none !important;
    }

    .hide-mobile {
        display: none !important;
    }

    /* Spacing Utilities */
    .space-y-lg>*+* {
        margin-top: var(--spacing-md);
    }

    .space-y-xl>*+* {
        margin-top: var(--spacing-lg);
    }

    /* Typography */
    h1 {
        font-size: var(--font-size-xl);
    }

    h2 {
        font-size: var(--font-size-lg);
    }

    h3 {
        font-size: var(--font-size-base);
    }

    /* Alert */
    .alert {
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: var(--font-size-xs);
    }

    /* Badge */
    .badge {
        font-size: 0.65rem;
        padding: 0.25em 0.6em;
    }

    /* Grid Gap */
    .grid {
        gap: var(--spacing-md);
    }

    /* CRITICAL: Prevent horizontal scroll */
    html,
    body {
        overflow-x: hidden;
        max-width: 100vw;
    }

    body {
        position: relative;
    }

    /* Ensure all containers respect viewport width */
    * {
        max-width: 100%;
    }

    /* Allow specific elements to overflow (like tables with scroll) */
    .table-container {
        max-width: calc(100vw - 2 * var(--spacing-sm));
    }

    /* Mobile Navigation Improvements */
    .flex {
        flex-wrap: wrap;
    }

    .flex.gap-xs,
    .flex.gap-sm,
    .flex.gap-md {
        gap: var(--spacing-xs);
    }

    /* Responsive button groups */
    .btn-group {
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-xs);
    }

    .btn-group .btn {
        flex: 1 1 auto;
        min-width: fit-content;
    }

    /* Module Navigation Buttons (Reserva, Solicitud, etc.) */
    .module-nav,
    .tab-nav,
    .nav-buttons {
        display: flex;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        gap: var(--spacing-xs);
        padding-bottom: var(--spacing-xs);
        margin: 0 calc(var(--spacing-sm) * -1);
        padding-left: var(--spacing-sm);
        padding-right: var(--spacing-sm);
        position: relative;
        scroll-behavior: smooth;
    }

    /* Make scrollbar MORE visible on mobile */
    .module-nav::-webkit-scrollbar,
    .tab-nav::-webkit-scrollbar,
    .nav-buttons::-webkit-scrollbar {
        height: 6px;
    }

    .module-nav::-webkit-scrollbar-track,
    .tab-nav::-webkit-scrollbar-track,
    .nav-buttons::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
    }

    .module-nav::-webkit-scrollbar-thumb,
    .tab-nav::-webkit-scrollbar-thumb,
    .nav-buttons::-webkit-scrollbar-thumb {
        background: var(--color-accent);
        border-radius: 3px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .module-nav::-webkit-scrollbar-thumb:hover,
    .tab-nav::-webkit-scrollbar-thumb:hover,
    .nav-buttons::-webkit-scrollbar-thumb:hover {
        background: var(--color-accent-hover);
    }

    /* Gradient overlays to indicate scrollable content */
    .module-nav::before,
    .module-nav::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 6px;
        /* Account for scrollbar */
        width: 30px;
        pointer-events: none;
        z-index: 2;
    }

    .module-nav::before {
        left: 0;
        background: linear-gradient(to right, var(--color-bg), transparent);
    }

    .module-nav::after {
        right: 0;
        background: linear-gradient(to left, var(--color-bg), transparent);
    }

    /* Make navigation buttons more readable on mobile */
    .module-nav button,
    .tab-nav button,
    .nav-buttons button {
        white-space: nowrap;
        min-width: 80px;
        font-size: var(--font-size-xs);
        padding: 0.5rem 0.75rem;
        flex-shrink: 0;
        /* Prevent buttons from shrinking */
    }

    /* Add a subtle hint animation on first load */
    @keyframes scrollHint {

        0%,
        100% {
            transform: translateX(0);
        }

        50% {
            transform: translateX(-5px);
        }
    }

    .module-nav {
        animation: scrollHint 2s ease-in-out 0.5s 2;
    }

    /* Header improvements for mobile */
    header,
    .app-header,
    .navbar {
        padding: var(--spacing-sm) var(--spacing-md);
    }

    header .logo,
    .app-header .logo {
        max-width: 120px;
        height: auto !important;
        max-height: 45px;
    }

    /* Language selector and logout buttons */
    header button,
    .app-header button {
        font-size: var(--font-size-xs);
        padding: 0.4rem 0.6rem;
        min-width: auto;
    }

    /* Reduce gap between header elements */
    header .gap-md,
    .app-header .gap-md {
        gap: var(--spacing-xs) !important;
    }

    /* Dashboard financial summary - stack vertically on mobile */
    .card-body>div[style*="gridTemplateColumns: repeat(3, 1fr)"] {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
    }

    /* Improve button groups on mobile */
    .card-body>div[style*="display: flex"][style*="gap"] {
        flex-wrap: wrap;
    }
}

/* Touch Device Enhancements */
@media (hover: none) and (pointer: coarse) {

    /* Increase Touch Targets */
    button,
    a,
    input,
    select,
    .btn {
        min-height: 44px;
        min-width: 44px;
    }

    /* Remove Hover Effects */
    .hover-lift:hover {
        transform: none;
        box-shadow: var(--shadow-md);
    }

    .hover-scale:hover {
        transform: none;
    }

    /* Add Active States */
    .btn:active {
        transform: scale(0.98);
        opacity: 0.9;
    }

    .card:active {
        transform: scale(0.99);
    }

    /* Table Row Touch Feedback */
    .table tbody tr:active {
        background: var(--color-bg);
    }
}

/* Landscape Mobile */
@media (max-width: 768px) and (orientation: landscape) {
    .page {
        padding: var(--spacing-sm) 0;
    }

    .page-header {
        padding: var(--spacing-sm) 0;
        margin-bottom: var(--spacing-md);
    }

    .modal-content {
        max-height: 90vh;
        overflow-y: auto;
    }

    .card {
        padding: var(--spacing-sm) var(--spacing-md);
    }
}

/* Small Mobile (\u003c 375px) */
@media (max-width: 375px) {
    .page-title {
        font-size: 1.5rem;
    }

    .btn {
        padding: 0.625rem 0.875rem;
        font-size: 0.8125rem;
    }

    .card {
        padding: var(--spacing-sm);
    }

    .table th,
    .table td {
        padding: var(--spacing-xs);
    }
}

/* Desktop - Hide mobile-only elements */
@media (min-width: 768px) {
    .mobile-only {
        display: none !important;
    }

    .desktop-only {
        display: block !important;
    }
}

/* Large Desktop (> 1440px) */
@media (min-width: 1440px) {
    .container {
        max-width: 1400px;
    }

    .grid-cols-4 {
        grid-template-columns: repeat(4, 1fr);
    }

    .grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Print Styles */
@media print {
    .no-print {
        display: none !important;
    }

    .page {
        padding: 0;
    }

    .card {
        box-shadow: none;
        border: 1px solid var(--color-border);
        page-break-inside: avoid;
    }

    .btn {
        display: none;
    }
}